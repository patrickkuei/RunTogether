{"version":3,"sources":["components/SideBarChatroom.tsx","redux/app/hooks.ts","redux/sidebarChatroomList/actionCreator.ts","redux/sidebarChatroomList/Reducers.ts","redux/sidebarChatroomList/slice.ts","redux/chatroom/Reducers.ts","redux/chatroom/actionCreator.ts","redux/chatroom/slice.ts","mock/GetRandomSideBarChatroom.ts","api/sideBarChatroomAPIs.ts","interface/index.ts","mock/GetRandomMessages.ts","api/chatroomAPIs.ts","components/SideBarChatroomList.tsx","configs/index.ts","components/SideBarSearchBar.tsx","components/SideBarHeader.tsx","components/SideBar.tsx","hooks/useChatGPT.tsx","components/ChatroomInput.tsx","components/ChatroomMessageList.tsx","components/ChatroomHeader.tsx","components/Chatroom.tsx","components/Main.tsx","redux/store.tsx","App.js","reportWebVitals.js","index.js"],"names":["SideBarChatroom","_ref","sideBarChatroom","collapsed","Text","Typography","participant","latestMessage","unreadMessageCount","name","avatarUrl","_ref2","senderId","preview","createdAt","_useState","useState","_useState2","_slicedToArray","isCollapsed","setIsCollapsed","visibledPreview","length","concat","substring","useLayoutEffect","_jsx","Image","width","height","src","fallback","className","_jsxs","Layout","children","Sider","theme","Header","_time","Date","setTime","getHours","toString","padStart","getMinutes","getUTCTime","Content","useAppDispatch","useDispatch","useAppSelector","useSelector","getLatestMessage","message","_objectSpread","sideBarChatroomListReducer","updateSideBarChatroomList","prevState","action","newList","payload","list","_toConsumableArray","resetUnreadCountById","id","map","prevSideBarChatroom","updateTempMessagesByParticipant","_action$payload","newMessages","undefined","newSideBarChatroom","tempMessages","addTempMessage","_action$payload2","currentParticipant","newMessage","sideBarChatRoomListSlice","createSlice","initialState","reducers","sideBarChatroomListActions","actions","useSideBarChatroomList","state","sideBarChatroomList","chatroomReducer","updateChatroom","addMessage","chatroomMessages","loadMore","moreMessage","chatroomSlice","currentUser","chatroomActions","useChatroom","chatroom","capitalize","str","toUpperCase","getRandomInt","min","max","Math","floor","random","getRandomParticipant","randomIntOfFirstName","FirstName","randomIntOfLastName","LastName","firstName","lastName","getRandomName","encodedName","encodeURIComponent","sideBarChatroomAPIs","getSideBarChatroomList","_newSideBarChatroomList","numberOfSideBarChatroom","i","push","uuidv4","MessageType","getRandomMessage","indexOfMessage","Messages","randomSender","type","getTime","getRandomMessages","messagesLength","chatroomAPIs","getChatroomMessages","SideBarChatroomList","dispatch","isLoading","setIsLoading","useEffect","newSideBarChatroomList","fetchSideBarChatroom","getMessages","handleSideBarChatroomClick","getCurrentChatroom","Menu","mode","defaultSelectedKeys","_sideBarChatroom$late","Item","onClick","title","configs","size","lg","md","sm","sideBar","logo","searchInput","SideBarSearchBar","handleSearchIconClick","SearchOutlined","Input","bordered","placeholder","prefix","SideBarHeader","MessageOutlined","_Fragment","Button","icon","FormOutlined","SideBar","setCollapsed","collapsible","onCollapse","prev","configuration","Configuration","apiKey","process","openai","OpenAIApi","useChatGPT","prompt","setPrompt","_useState3","_useState4","history","setHistory","fetchData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","nextPrompt","response","wrap","_context","next","join","createCompletion","model","temperature","max_tokens","top_p","frequency_penalty","presence_penalty","sent","data","choices","text","t0","stop","apply","arguments","updatePrompt","Footer","ChatroomInput","inputValue","setInputValue","isEmojiPickerVisibled","setIsEmojiPickerVisibled","inputRef","useRef","current","value","focus","style","display","flex","onSubmit","e","preventDefault","onFocus","onChange","currentTarget","ref","maxWidth","alignItems","justifyContent","shape","SmileOutlined","position","bottom","right","Picker","onEmojiClick","event","emojiObject","emoji","ChatroomMessageList","bottomDiv","setTimeout","_bottomDiv$current","child","lastChild","scrollIntoView","behavior","getAiResponse","mainTextIndex","indexOf","slice","moreMessages","Empty","ChatroomHeader","Chatroom","padding","Main","maxHeight","minHeight","overflow","store","configureStore","reducer","StoreProvider","Provider","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad7ba487.chunk.js","sourcesContent":["import { Layout, Image, Typography } from \"antd\";\nimport { Header, Content } from \"antd/lib/layout/layout\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport { ISideBarChatroom } from \"../interface\";\n\ninterface Props {\n  sideBarChatroom: ISideBarChatroom;\n  collapsed: boolean;\n}\n\nconst SideBarChatroom: React.FC<Props> = ({ sideBarChatroom, collapsed }) => {\n  const { Text } = Typography;\n  const { participant, latestMessage, unreadMessageCount } = sideBarChatroom;\n  const { name, avatarUrl } = participant;\n  const { senderId, preview, createdAt } = latestMessage ?? {};\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  const visibledPreview = preview\n    ? preview.length < 30\n      ? preview\n      : `${preview?.substring(0, 30)}...`\n    : \"\";\n\n  const getUTCTime = (createdAt: number | undefined): string => {\n    if (createdAt) {\n      const _time = new Date();\n      _time.setTime(createdAt);\n      return (\n        _time.getHours().toString().padStart(2, \"0\") +\n        \":\" +\n        _time.getMinutes().toString().padStart(2, \"0\")\n      );\n    } else {\n      return \"\";\n    }\n  };\n\n  useLayoutEffect(() => {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n\n  return isCollapsed ? (\n    <Image\n      width={50}\n      height={50}\n      src={avatarUrl}\n      fallback=\"data:image/png;base64,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\"\n      preview={false}\n      className=\"avatar-img\"\n    />\n  ) : (\n    <Layout className=\"sideBar-chatroom\">\n      <Sider\n        theme=\"light\"\n        width={50}\n        className=\"sideBar-chatroom_avatar-img-container\"\n      >\n        <Image\n          width={50}\n          height={50}\n          src={avatarUrl}\n          fallback=\"data:image/png;base64,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\"\n          preview={false}\n          className=\"avatar-img\"\n        />\n      </Sider>\n      <Layout\n        className={\n          unreadMessageCount > 0\n            ? \"have-unread-message sideBar-chatroom_avatar-info-container\"\n            : \"sideBar-chatroom_avatar-info-container\"\n        }\n      >\n        <Header className=\"sideBar-chatroom_avatar-info_participant\">\n          <Text className=\"sideBar-chatroom_name\">{name}</Text>\n          <Text className=\"latest-message-time\">{getUTCTime(createdAt)}</Text>\n        </Header>\n        <Content className=\"sideBar-chatroom_latest-message-container\">\n          <Text>\n            {senderId === 0 ? `you: ${visibledPreview}` : visibledPreview}\n          </Text>\n        </Content>\n      </Layout>\n      {unreadMessageCount > 0 ? (\n        <div className=\"unread-message-count-container\">\n          <Text>{unreadMessageCount}</Text>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </Layout>\n  );\n};\n\nexport default SideBarChatroom;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import { PayloadAction } from \"@reduxjs/toolkit\";\n\nimport {\n  ISideBarChatroomList,\n  ISideBarChatroom,\n  IChatroomMessage,\n  IUser,\n  ILatestMessage,\n} from \"../../interface\";\n\nconst updateSideBarChatroomList = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<Array<ISideBarChatroom>>\n): ISideBarChatroomList => {\n  const newList: Array<ISideBarChatroom> = action.payload;\n  return {\n    list: [...prevState!.list, ...newList],\n  };\n};\n\nconst resetUnreadCountById = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<string>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const id = action.payload;\n    const newList: Array<ISideBarChatroom> = prevState.list.map(\n      (sideBarChatroom: ISideBarChatroom) => {\n        const prevSideBarChatroom = { ...sideBarChatroom };\n        if (prevSideBarChatroom.id === id) {\n          prevSideBarChatroom.unreadMessageCount = 0;\n        }\n        return prevSideBarChatroom;\n      }\n    );\n    return {\n      list: newList,\n    };\n  }\n};\n\nconst getLatestMessage = (\n  message: IChatroomMessage\n): ILatestMessage | undefined => {\n  const latestMessage = message;\n  return {\n    ...latestMessage,\n    preview: latestMessage?.message,\n  };\n};\n\ninterface updateTempMessagesProps {\n  participant: IUser;\n  newMessages: IChatroomMessage[] | undefined;\n}\n\nconst updateTempMessagesByParticipant = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<updateTempMessagesProps>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const { participant, newMessages } = action.payload;\n    if (newMessages !== undefined) {\n      const newSideBarChatroomList: ISideBarChatroom[] = prevState.list.map(\n        (sideBarChatroom: ISideBarChatroom): ISideBarChatroom => {\n          const newSideBarChatroom = { ...sideBarChatroom };\n          if (newSideBarChatroom.participant.id === participant.id) {\n            newSideBarChatroom.tempMessages = newMessages;\n            newSideBarChatroom.latestMessage = getLatestMessage(\n              newMessages[newMessages.length - 1]\n            );\n          }\n          return newSideBarChatroom;\n        }\n      );\n      return {\n        list: newSideBarChatroomList,\n      };\n    }\n    return prevState;\n  }\n};\n\ninterface addTempMessageProp {\n  currentParticipant: IUser;\n  newMessage: IChatroomMessage;\n}\n\nconst addTempMessage = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<addTempMessageProp>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const { currentParticipant, newMessage } = action.payload;\n    const newSideBarChatroomList: ISideBarChatroom[] = prevState.list.map(\n      (sideBarChatroom: ISideBarChatroom) => {\n        const newSideBarChatroom = { ...sideBarChatroom };\n        if (newSideBarChatroom.participant.id === currentParticipant.id) {\n          if (newSideBarChatroom.tempMessages !== undefined) {\n            newSideBarChatroom.tempMessages = [\n              ...newSideBarChatroom.tempMessages,\n              newMessage,\n            ];\n          }\n          newSideBarChatroom.latestMessage = getLatestMessage(newMessage);\n        }\n        return newSideBarChatroom;\n      }\n    );\n    return {\n      list: newSideBarChatroomList,\n    };\n  }\n};\n\nconst actions = {\n  updateSideBarChatroomList,\n  resetUnreadCountById,\n  updateTempMessagesByParticipant,\n  addTempMessage,\n};\n\nexport default actions;\n","import { ValidateSliceCaseReducers } from \"@reduxjs/toolkit\";\nimport { ISideBarChatroomList } from \"../../interface\";\nimport actionCreator from \"./actionCreator\";\n\nexport const sideBarChatroomListReducer: ValidateSliceCaseReducers<\n  ISideBarChatroomList | null,\n  typeof actionCreator\n> = actionCreator;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { ISideBarChatroomList } from \"../../interface\";\nimport { useAppSelector } from \"../app/hooks\";\nimport { sideBarChatroomListReducer } from \"./Reducers\";\n\nconst initialState: ISideBarChatroomList | null = {\n  list: [\n    {\n      id: \"999\",\n      participant: {\n        id: 999,\n        name: \"ChatGPT\",\n        avatarUrl: \"https://cdn-icons-png.flaticon.com/512/2432/2432846.png\",\n      },\n      unreadMessageCount: 0,\n      tempMessages: []\n    },\n  ],\n};\n\nconst sideBarChatRoomListSlice = createSlice({\n  name: \"sideBarChatRoomListSlice\",\n  initialState,\n  reducers: sideBarChatroomListReducer,\n});\n\nexport const sideBarChatroomListActions = sideBarChatRoomListSlice.actions;\n\nexport const useSideBarChatroomList = () =>\n  useAppSelector((state) => state.sideBarChatroomList);\n\nexport default sideBarChatRoomListSlice.reducer;\n","import { ValidateSliceCaseReducers } from \"@reduxjs/toolkit\";\nimport { IChatroom } from \"../../interface\";\nimport actionCreator from \"./actionCreator\";\n\nexport const chatroomReducer: ValidateSliceCaseReducers<\n  IChatroom | null,\n  typeof actionCreator\n> = actionCreator;\n","import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { IChatroom, IChatroomMessage } from \"../../interface\";\n\nconst updateChatroom = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroom>\n): IChatroom => ({...prevState, ...action.payload});\n\nconst addMessage = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroomMessage>\n): IChatroom | void => {\n  if (prevState !== null) {\n    const newChatroom: IChatroom = {\n      ...prevState,\n      chatroomMessages:\n        prevState.chatroomMessages !== undefined\n          ? [...prevState.chatroomMessages, action.payload]\n          : [action.payload],\n    };\n    return newChatroom;\n  }\n};\n\nconst loadMore = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroomMessage[]>\n): IChatroom | void => {\n  if (prevState !== null && prevState.chatroomMessages !== undefined) {\n    const moreMessage = action.payload;\n    return {\n      ...prevState,\n      chatroomMessages: [...moreMessage, ...prevState.chatroomMessages],\n    };\n  }\n};\n\nconst actions = { updateChatroom, addMessage, loadMore };\n\nexport default actions;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nimport { IChatroom } from \"../../interface\";\nimport { useAppSelector } from \"../app/hooks\";\nimport { chatroomReducer } from \"./Reducers\";\n\nconst initialState: IChatroom | null = {\n    currentParticipant: {\n      id: 999,\n      name: 'ChatGPT',\n      avatarUrl: 'https://cdn-icons-png.flaticon.com/512/2432/2432846.png',\n    },\n    currentUser: {\n      id: 0,\n      name: 'Human',\n      avatarUrl: '',\n    },\n    chatroomMessages: []\n};\n\nexport const chatroomSlice = createSlice({\n  name: \"chatroomSlice\",\n  initialState,\n  reducers: chatroomReducer,\n});\n\nexport const chatroomActions = chatroomSlice.actions;\n\nexport const useChatroom = () => useAppSelector((state) => state.chatroom);\n\nexport default chatroomSlice.reducer;\n","import { ISideBarChatroom, IUser } from \"../interface\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport FirstName from \"./FirstName.json\";\nimport LastName from \"./LastName.json\";\n\nconst capitalize = (str: string) => str[0].toUpperCase() + str.substring(0);\n\nconst getRandomInt = (min: number, max: number): number =>\n  Math.floor(Math.random() * (max - min) + min);\n\nconst getRandomName = (): string => {\n  const randomIntOfFirstName = getRandomInt(0, FirstName.length);\n  const randomIntOfLastName = getRandomInt(0, LastName.length);\n  const firstName = capitalize(FirstName[randomIntOfFirstName]);\n  const lastName = capitalize(LastName[randomIntOfLastName]);\n\n  return `${firstName} ${lastName}`;\n};\n\nconst getRandomParticipant = (): IUser => {\n  const name = getRandomName();\n  const encodedName = encodeURIComponent(name);\n  return {\n    id: Math.floor(Math.random() * 100),\n    name,\n    avatarUrl: `https://icotar.com/initials/${encodedName}`,\n  };\n};\n\nexport const getRandomSideBarChatroom = (): ISideBarChatroom => ({\n  id: uuidv4(),\n  participant: getRandomParticipant(),\n  unreadMessageCount: Math.floor(Math.random() * 1000),\n});\n","import { ISideBarChatroom } from \"../interface\";\nimport { getRandomSideBarChatroom } from \"../mock/GetRandomSideBarChatroom\";\n\nexport const sideBarChatroomAPIs = {\n  getSideBarChatroomList: () => {\n    const _newSideBarChatroomList: ISideBarChatroom[] = [];\n    const numberOfSideBarChatroom = Math.floor((Math.random() + 4) * 10);\n    for (let i = 0; i < numberOfSideBarChatroom; i++) {\n      _newSideBarChatroomList.push(getRandomSideBarChatroom());\n    }\n\n    return _newSideBarChatroomList;\n  },\n};\n","export interface ISideBarChatroomList {\n  list: ISideBarChatroom[];\n}\nexport interface ISideBarChatroom {\n  id: string;\n  participant: IUser;\n  tempMessages?: IChatroomMessage[];\n  latestMessage?: ILatestMessage;\n  unreadMessageCount: number;\n}\n\nexport interface ILatestMessage {\n  id: string;\n  type: MessageType;\n  senderId: number;\n  preview?: string;\n  createdAt: number;\n}\n\nexport enum MessageType {\n  Text,\n  Image,\n  Video,\n  File,\n}\n\nexport interface IUser {\n  id: number;\n  name: string;\n  avatarUrl: string;\n}\n\nexport interface IChatroom {\n  currentParticipant: IUser;\n  currentUser: IUser;\n  chatroomMessages?: IChatroomMessage[];\n}\n\nexport interface IChatroomMessage {\n  id: string;\n  type: MessageType;\n  senderId: number;\n  message: string;\n  createdAt: number;\n}\n","import Messages from \"./Messages.json\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { IChatroomMessage, MessageType } from \"../interface\";\n\nconst getRandomMessage = (senderId: number): IChatroomMessage => {\n  const indexOfMessage = Math.floor(Math.random() * Messages.length);\n  const randomSender = Math.floor(Math.random() * 50) > 25 ? 0 : senderId;\n\n  return {\n    id: uuidv4(),\n    type: MessageType.Text,\n    senderId: randomSender,\n    message: Messages[indexOfMessage],\n    createdAt: new Date().getTime() - Math.floor(Math.random() * 3000),\n  };\n};\n\nexport const getRandomMessages = (\n  senderId: number\n): IChatroomMessage[] | undefined => {\n  const newMessages: IChatroomMessage[] = [];\n  const messagesLength: number = Math.floor(Math.random() * 500);\n  for (let i = 0; i < messagesLength; i++) {\n    newMessages.push(getRandomMessage(senderId));\n  }\n  return newMessages.length > 0 ? newMessages : undefined;\n};\n","import { getRandomMessages } from \"../mock/GetRandomMessages\";\n\nexport const chatroomAPIs = {\n  getChatroomMessages: (id: number) => getRandomMessages(id),\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Menu } from \"antd\";\nimport SideBarChatroom from \"./SideBarChatroom\";\nimport {\n  sideBarChatroomListActions,\n  useSideBarChatroomList,\n} from \"../redux/sidebarChatroomList/slice\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nimport {\n  IChatroom,\n  IChatroomMessage,\n  ISideBarChatroom,\n  IUser,\n} from \"../interface\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { sideBarChatroomAPIs } from \"../api/sideBarChatroomAPIs\";\nimport { chatroomAPIs } from \"../api/chatroomAPIs\";\n\ntype SideBarChatroomListProps = {\n  collapsed: boolean;\n};\n\nexport default function SideBarChatroomList({\n  collapsed,\n}: SideBarChatroomListProps) {\n  const sideBarChatroomList = useSideBarChatroomList();\n  const dispatch = useAppDispatch();\n  const {\n    updateSideBarChatroomList,\n    resetUnreadCountById,\n    updateTempMessagesByParticipant,\n  } = sideBarChatroomListActions;\n  const { updateChatroom } = chatroomActions;\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchSideBarChatroom = () => {\n    const newSideBarChatroomList: ISideBarChatroom[] = sideBarChatroomAPIs.getSideBarChatroomList();\n    dispatch(updateSideBarChatroomList(newSideBarChatroomList));\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchSideBarChatroom();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // if sideBarChatroom.tempMessage exist, use it without fetch\n  const getMessages = (\n    sideBarChatroom: ISideBarChatroom\n  ): IChatroomMessage[] | undefined => {\n    if (sideBarChatroom.tempMessages === undefined && sideBarChatroom.id !== '999') {\n      const newMessages:\n        | IChatroomMessage[]\n        | undefined = chatroomAPIs.getChatroomMessages(\n        sideBarChatroom.participant.id\n      );\n      dispatch(\n        updateTempMessagesByParticipant({\n          participant: sideBarChatroom.participant,\n          newMessages,\n        })\n      );\n      return newMessages;\n    } else {\n      return sideBarChatroom.tempMessages;\n    }\n  };\n\n  const getCurrentChatroom = (sideBarChatroom: ISideBarChatroom): IChatroom => {\n    const currentUser: IUser = {\n      id: 0,\n      name: \"YOU\",\n      avatarUrl: \"/userImg.jpg\",\n    };\n    const newChatroom: IChatroom = {\n      currentParticipant: sideBarChatroom.participant,\n      currentUser,\n      chatroomMessages: getMessages(sideBarChatroom),\n    };\n    return newChatroom;\n  };\n\n  const handleSideBarChatroomClick = (sideBarChatroom: ISideBarChatroom) => {\n    const { id } = sideBarChatroom;\n    dispatch(resetUnreadCountById(id));\n    dispatch(updateChatroom(getCurrentChatroom(sideBarChatroom)));\n  };\n\n  return isLoading ? (\n    <div>loading...</div>\n  ) : (\n    <Menu theme=\"light\" mode=\"inline\" defaultSelectedKeys={[\"999\"]}>\n      {sideBarChatroomList &&\n        sideBarChatroomList.list.map((sideBarChatroom) => (\n          <Menu.Item\n            onClick={() => handleSideBarChatroomClick(sideBarChatroom)}\n            key={sideBarChatroom.id}\n            className=\"sidebar-chatroom-container\"\n            title={sideBarChatroom.latestMessage?.preview}\n          >\n            <SideBarChatroom\n              sideBarChatroom={sideBarChatroom}\n              collapsed={collapsed}\n            />\n          </Menu.Item>\n        ))}\n    </Menu>\n  );\n}\n","export const configs = {\n  size:{\n    lg: \"large\",\n    md: \"middle\",\n    sm: \"small\",\n  },\n  sideBar:{\n    logo: \"Messenger\",\n    searchInput: \"Search Messenger\"\n  }\n}","import React from \"react\";\nimport { Input } from \"antd\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { configs } from \"../configs\";\n\ntype SearchBarProps = {\n  collapsed: boolean;\n  handleSearchIconClick?: () => void;\n};\n\nexport default function SideBarSearchBar({ collapsed, handleSearchIconClick }: SearchBarProps) {\n  \n  return !collapsed ? (\n    <div className=\"search-bar-container\">\n      <Input\n        bordered={false}\n        placeholder={configs.sideBar.searchInput}\n        prefix={<SearchOutlined />}\n      />\n    </div>\n  ) : (\n    <div className=\"collapsed-search-icon-container\" onClick={handleSearchIconClick}>\n      <SearchOutlined className=\"collapsed-search-icon\" />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { MessageOutlined, FormOutlined } from \"@ant-design/icons\";\nimport { Button } from \"antd\";\nimport { configs } from \"../configs\";\n\ntype SideBarHeaderProps = {\n  collapsed: boolean;\n};\n\nexport default function SideBarHeader({ collapsed }: SideBarHeaderProps) {\n  return !collapsed ? (\n    <>\n      <div className=\"logo-container\">\n        <MessageOutlined className=\"logo-icon\" />\n      </div>\n      <div className=\"header-logo\">{configs.sideBar.logo}</div>\n      <Button\n        className=\"sidebar_button\"\n        size=\"large\"\n        icon={<FormOutlined className=\"sideBar_button_icon\" />}\n      />\n    </>\n  ) : (\n    <div className=\"collapsed-logo-icon-container\">\n      <MessageOutlined className=\"logo-icon\" />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Layout } from \"antd\";\nimport SideBarChatroomList from \"./SideBarChatroomList\";\nimport SideBarSearchBar from \"./SideBarSearchBar\";\nimport SideBarHeader from \"./SideBarHeader\";\n\nconst { Header, Sider } = Layout;\n\nexport default function SideBar() {\n  const [collapsed, setCollapsed] = useState(false);\n\n  const handleSearchIconClick = (): void => {\n    setCollapsed((prev) => !prev);\n  };\n\n  const onCollapse = (collapsed: boolean) => {\n    setCollapsed(collapsed);\n  };\n  return (\n    <Sider\n      className=\"sideBar\"\n      collapsible\n      collapsed={collapsed}\n      onCollapse={onCollapse}\n      width={350}\n    >\n      <Header\n        className={\n          collapsed ? \"sideBar_header collapsed_header\" : \"sideBar_header\"\n        }\n      >\n        <SideBarHeader collapsed={collapsed} />\n      </Header>\n      <SideBarSearchBar\n        collapsed={collapsed}\n        handleSearchIconClick={handleSearchIconClick}\n      />\n      <SideBarChatroomList collapsed={collapsed} />\n    </Sider>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { Configuration, OpenAIApi } from \"openai\";\nimport { IChatroomMessage, IUser, MessageType } from \"../interface\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { sideBarChatroomListActions } from \"../redux/sidebarChatroomList/slice\";\n\nconst configuration = new Configuration({\n  apiKey: process.env.REACT_APP_OPENAI_API_KEY,\n});\nconst openai = new OpenAIApi(configuration);\n\nconst useChatGPT = (currentParticipant: IUser) => {\n  const dispatch = useAppDispatch();\n  const [prompt, setPrompt] = useState(\"\");\n  const [history, setHistory] = useState<string[]>([\n    \"The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\\n\\nHuman: Hello, who are you?\\nAI: I am an AI created by OpenAI. How can I help you today?\",\n  ]);\n\n  const { addMessage } = chatroomActions;\n  const { addTempMessage } = sideBarChatroomListActions;\n\n  const fetchData = async () => {\n    const nextPrompt = `${history.join(\"\")}\\nHuman: ${prompt}`;\n\n    try {\n      const response = await openai.createCompletion({\n        model: \"text-davinci-003\",\n        prompt: nextPrompt,\n        temperature: 0.6,\n        max_tokens: 1500,\n        top_p: 1,\n        frequency_penalty: 0,\n        presence_penalty: 0.6,\n      });\n\n      setHistory([nextPrompt, response.data.choices[0].text || '']);\n\n      const newMessage: IChatroomMessage = {\n        id: uuidv4(),\n        type: MessageType.Text,\n        senderId: currentParticipant.id,\n        message: response.data.choices[0].text || \"\",\n        createdAt: new Date().getTime(),\n      };\n\n      dispatch(addMessage(newMessage));\n      dispatch(\n        addTempMessage({\n          currentParticipant,\n          newMessage,\n        })\n      );\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  useEffect(() => {\n    if (!prompt.length || currentParticipant.id !== 999) {\n      return;\n    }\n\n    fetchData();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [prompt]);\n\n  return {\n    updatePrompt: setPrompt,\n  };\n};\n\nexport default useChatGPT;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Button, Layout } from \"antd\";\nimport { SmileOutlined } from \"@ant-design/icons\";\nimport Picker, { IEmojiData } from \"emoji-picker-react\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { IChatroom, IChatroomMessage, MessageType } from \"../interface\";\nimport { sideBarChatroomListActions } from \"../redux/sidebarChatroomList/slice\";\nimport useChatGPT from \"../hooks/useChatGPT\";\nconst { Footer } = Layout;\n\ntype ChatroomInputProps = {\n  chatroom: IChatroom;\n};\nexport default function ChatroomInput({ chatroom }: ChatroomInputProps) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const dispatch = useAppDispatch();\n  const { addMessage } = chatroomActions;\n  const { addTempMessage } = sideBarChatroomListActions;\n  const { currentParticipant } = chatroom;\n  const [isEmojiPickerVisibled, setIsEmojiPickerVisibled] = useState(false);\n  const inputRef = useRef<null | HTMLInputElement>(null);\n\n  const { updatePrompt } = useChatGPT(currentParticipant)\n\n  const handleInputChange = (e: React.FormEvent<HTMLInputElement>) => {\n    setInputValue(e.currentTarget.value);\n  };\n\n  const handleFormSubmit = (e: React.FormEvent): void => {\n    e.preventDefault();\n\n    if (inputValue !== \"\") {\n      updatePrompt(inputValue)\n\n      const newMessage: IChatroomMessage = {\n        id: uuidv4(),\n        type: MessageType.Text,\n        senderId: 0,\n        message: inputValue,\n        createdAt: new Date().getTime(),\n      };\n\n      dispatch(addMessage(newMessage));\n      dispatch(addTempMessage({ currentParticipant, newMessage }));\n      setInputValue(\"\");\n    }\n  };\n  const onEmojiClick = (\n    event: React.MouseEvent,\n    emojiObject: IEmojiData\n  ): void => {\n    setInputValue((prev) => prev + emojiObject.emoji);\n  };\n\n  const toggleEmojiPickerVisibled = (): void => {\n    setIsEmojiPickerVisibled((prev) => !prev);\n  };\n\n  const handleInputFocused = (): void => {\n    if (isEmojiPickerVisibled) {\n      setIsEmojiPickerVisibled(false);\n    }\n  };\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.value = \"\";\n      inputRef.current.focus();\n    }\n  }, [chatroom]);\n\n  return (\n    <Footer style={{ display: \"flex\" }}>\n      <form style={{ flex: 1 }} onSubmit={handleFormSubmit}>\n        <input\n          onFocus={handleInputFocused}\n          value={inputValue}\n          onChange={handleInputChange}\n          ref={inputRef}\n        />\n      </form>\n      <div\n        style={{\n          maxWidth: 50,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Button\n          onClick={toggleEmojiPickerVisibled}\n          shape=\"circle\"\n          icon={<SmileOutlined />}\n        />\n      </div>\n      {isEmojiPickerVisibled ? (\n        <div style={{ position: \"absolute\", bottom: 53, right: 0 }}>\n          <Picker onEmojiClick={onEmojiClick} />\n        </div>\n      ) : (\n        <></>\n      )}\n    </Footer>\n  );\n}\n","import React, { useLayoutEffect, useRef } from \"react\";\nimport { Layout, Image, Button, Empty } from \"antd\";\nimport { IChatroom, IChatroomMessage } from \"../interface\";\nimport { getRandomMessages } from \"../mock/GetRandomMessages\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nconst { Content } = Layout;\n\ntype MessageListProps = {\n  chatroom: IChatroom | null;\n};\n\nexport default function ChatroomMessageList({ chatroom }: MessageListProps) {\n  const avatarUrl = chatroom ? chatroom.currentParticipant.avatarUrl : \"\";\n  const bottomDiv = useRef<null | HTMLDivElement>(null);\n  const scrollToBottom = (): void => {\n    setTimeout(() => {\n      const child = bottomDiv.current?.lastChild as HTMLDivElement;\n\n      child?.scrollIntoView({ behavior: \"smooth\" });\n    }, 0);\n  };\n  const dispatch = useAppDispatch();\n  const { loadMore } = chatroomActions;\n\n  useLayoutEffect(() => {\n    scrollToBottom();\n  }, [chatroom?.currentParticipant.id, chatroom?.chatroomMessages]);\n\n  const handleLoadMoreClick = (): void => {\n    if (chatroom) {\n      const moreMessages: IChatroomMessage[] | undefined = getRandomMessages(\n        chatroom.currentParticipant.id\n      );\n      if (moreMessages) {\n        dispatch(loadMore(moreMessages));\n      }\n    }\n  };\n\n  const getAiResponse = (str: string): string => {\n    const mainTextIndex = str.indexOf(\"AI:\") + 4\n\n    return str.slice(mainTextIndex)\n  }\n\n  return (\n    <Content className=\"message-list-container\">\n      {chatroom && chatroom.chatroomMessages !== undefined ? (\n        <div ref={bottomDiv} className=\"site-layout-background\">\n          {chatroom.currentParticipant.id === 999 ? null : (\n            <div\n              className=\"message-container\"\n              style={{ justifyContent: \"center\" }}\n            >\n              <Button\n                type=\"primary\"\n                shape=\"round\"\n                onClick={handleLoadMoreClick}\n              >\n                load more\n              </Button>\n            </div>\n          )}\n          {chatroom.chatroomMessages.map((message) => (\n            <div\n              key={message.id}\n              className={\n                message.senderId === 0\n                  ? \"message-container user\"\n                  : \"message-container\"\n              }\n            >\n              {message.senderId === 0 ? (\n                <></>\n              ) : (\n                <div className=\"avatar\">\n                  <Image\n                    src={avatarUrl}\n                    width={30}\n                    height={30}\n                    preview={false}\n                  />\n                </div>\n              )}\n              {message.senderId === 0 ? (\n                <div\n                  className=\"message user\"\n                >\n                  {message.message}\n                </div>\n              ) : (\n                <div\n                  className=\"message\"\n                >\n                  {chatroom.currentParticipant.id === 999 ? getAiResponse(message.message) : message.message}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div\n          style={{\n            height: \"100%\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <Empty />\n        </div>\n      )}\n    </Content>\n  );\n}\n","import React from \"react\";\nimport { Image } from \"antd\";\nimport { IChatroom, IUser } from \"../interface\";\n\ntype ChatroomHeaderProps = {\n  chatroom: IChatroom | null;\n};\n\nexport default function ChatroomHeader({ chatroom }: ChatroomHeaderProps) {\n  const currentUser: IUser = {\n    id: 0,\n    name: \"you\",\n    avatarUrl: `https://icotar.com/initials/${encodeURIComponent(\n      \"Patrick Yang\"\n    )}`,\n  };\n\n  return (\n    <div className=\"chatroom-header-container\">\n      <div className=\"chatroom-header-participant\">\n        {chatroom?.currentParticipant.name}\n      </div>\n      <div className=\"chatroom-header-user-container\">\n        <div className=\"user\">{currentUser.name}</div>\n        {currentUser.avatarUrl === \"initial user avatar url\" ? (\n          <></>\n        ) : (\n          <Image\n            width={50}\n            height={50}\n            src={currentUser.avatarUrl}\n            preview={false}\n            className=\"user-img\"\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Layout } from \"antd\";\nimport ChatroomInput from \"./ChatroomInput\";\nimport ChatroomMessageList from \"./ChatroomMessageList\";\nimport ChatroomHeader from \"./ChatroomHeader\";\nimport { useChatroom } from \"../redux/chatroom/slice\";\n\nconst { Header } = Layout;\n\nexport default function Chatroom() {\n  const chatroom = useChatroom();\n\n  return (\n    <Layout className=\"site-layout\">\n      <Header className=\"header-background\" style={{ padding: 0 }}>\n        <ChatroomHeader chatroom={chatroom} />\n      </Header>\n      <ChatroomMessageList chatroom={chatroom} />\n      {chatroom !== null ? <ChatroomInput chatroom={chatroom} /> : <></>}\n    </Layout>\n  );\n}\n","import * as React from \"react\";\nimport \"antd/dist/antd.css\";\nimport { Layout } from \"antd\";\nimport SideBar from \"./SideBar\";\nimport Chatroom from \"./Chatroom\";\n\nexport default function Main() {\n  return (\n    <Layout style={{ maxHeight: \"100vh\", minHeight: \"100vh\", overflow:\"hidden\" }}>\n      <SideBar />\n      <Chatroom />\n    </Layout>\n  );\n}\n","import React, { FunctionComponent, ReactNode } from \"react\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport { Provider } from \"react-redux\";\nimport sideBarChatRoomListSlice from \"./sidebarChatroomList/slice\";\nimport chatroomSlice from \"./chatroom/slice\";\n\nconst store = configureStore({\n  reducer: {\n    sideBarChatroomList: sideBarChatRoomListSlice,\n    chatroom: chatroomSlice,\n  },\n});\n\nexport const StoreProvider: FunctionComponent<{children: ReactNode}> = ({ children }) => (\n  <Provider store={store}>{children}</Provider>\n);\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import \"./style/index.scss\";\nimport Main from \"./components/Main\";\nimport { StoreProvider } from \"./redux/store\";\n\nfunction App() {\n  return (\n    <StoreProvider>\n      <Main />\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}