{"version":3,"sources":["interface/index.ts","components/SideBarChatroom.tsx","redux/app/hooks.ts","redux/sidebarChatroomList/actionCreator.ts","redux/sidebarChatroomList/Reducers.ts","redux/sidebarChatroomList/slice.ts","redux/chatroom/Reducers.ts","redux/chatroom/actionCreator.ts","redux/chatroom/slice.ts","mock/GetRandomSideBarChatroom.ts","api/sideBarChatroomAPIs.ts","mock/GetRandomMessages.ts","api/chatroomAPIs.ts","components/SideBarChatroomList.tsx","configs/index.ts","components/SideBarSearchBar.tsx","components/SideBarHeader.tsx","components/SideBar.tsx","components/ChatroomInput.tsx","components/ChatroomMessageList.tsx","components/ChatroomHeader.tsx","components/Chatroom.tsx","components/Main.tsx","redux/store.tsx","App.js","reportWebVitals.js","index.js"],"names":["MessageType","SideBarChatroom","sideBarChatroom","collapsed","Text","Typography","participant","latestMessage","unreadMessageCount","name","avatarUrl","senderId","preview","createdAt","useState","isCollapsed","setIsCollapsed","visibledPreview","length","substring","useLayoutEffect","width","height","src","fallback","className","theme","_time","Date","setTime","getHours","toString","padStart","getMinutes","getUTCTime","useAppDispatch","useDispatch","useAppSelector","useSelector","getLatestMessage","message","sideBarChatroomListReducer","updateSideBarChatroomList","prevState","action","list","payload","resetUnreadCountById","id","map","prevSideBarChatroom","updateTempMessagesByParticipant","newMessages","undefined","newSideBarChatroom","tempMessages","addTempMessage","currentParticipant","newMessage","sideBarChatRoomListSlice","createSlice","initialState","reducers","sideBarChatroomListActions","actions","chatroomReducer","updateChatroom","addMessage","chatroomMessages","loadMore","moreMessage","chatroomSlice","chatroomActions","capitalize","str","toUpperCase","getRandomInt","min","max","Math","floor","random","getRandomParticipant","randomIntOfFirstName","FirstName","randomIntOfLastName","LastName","firstName","lastName","getRandomName","encodedName","encodeURIComponent","sideBarChatroomAPIs","_newSideBarChatroomList","numberOfSideBarChatroom","i","push","uuidv4","getRandomMessage","indexOfMessage","Messages","randomSender","type","getTime","getRandomMessages","messagesLength","chatroomAPIs","SideBarChatroomList","sideBarChatroomList","state","dispatch","isLoading","setIsLoading","useEffect","newSideBarChatroomList","fetchSideBarChatroom","getMessages","handleSideBarChatroomClick","currentUser","getCurrentChatroom","mode","Item","onClick","title","configs","logo","searchInput","SideBarSearchBar","handleSearchIconClick","SearchOutlined","bordered","placeholder","prefix","SideBarHeader","MessageOutlined","size","icon","FormOutlined","Header","Layout","Sider","SideBar","setCollapsed","collapsible","onCollapse","prev","Footer","ChatroomInput","chatroom","inputValue","setInputValue","isEmojiPickerVisibled","setIsEmojiPickerVisibled","inputRef","useRef","current","value","focus","style","display","flex","onSubmit","e","preventDefault","onFocus","onChange","currentTarget","ref","maxWidth","alignItems","justifyContent","shape","SmileOutlined","position","bottom","right","onEmojiClick","event","emojiObject","emoji","Content","ChatroomMessageList","bottomDiv","setTimeout","scrollIntoView","behavior","moreMessages","ChatroomHeader","Chatroom","padding","Main","maxHeight","minHeight","overflow","store","configureStore","reducer","StoreProvider","children","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9a4091cd.chunk.js","sourcesContent":["export interface ISideBarChatroomList {\n  list: ISideBarChatroom[];\n}\nexport interface ISideBarChatroom {\n  id: string;\n  participant: IUser;\n  tempMessages?: IChatroomMessage[];\n  latestMessage?: ILatestMessage;\n  unreadMessageCount: number;\n}\n\nexport interface ILatestMessage {\n  id: string;\n  type: MessageType;\n  senderId: number;\n  preview?: string;\n  createdAt: number;\n}\n\nexport enum MessageType {\n  Text,\n  Image,\n  Video,\n  File,\n}\n\nexport interface IUser {\n  id: number;\n  name: string;\n  avatarUrl: string;\n}\n\nexport interface IChatroom {\n  currentParticipant: IUser;\n  currentUser: IUser;\n  chatroomMessages?: IChatroomMessage[];\n}\n\nexport interface IChatroomMessage {\n  id: string;\n  type: MessageType;\n  senderId: number;\n  message: string;\n  createdAt: number;\n}\n","import { Layout, Image, Typography } from \"antd\";\nimport { Header, Content } from \"antd/lib/layout/layout\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport { ISideBarChatroom } from \"../interface\";\n\ninterface Props {\n  sideBarChatroom: ISideBarChatroom;\n  collapsed: boolean;\n}\n\nconst SideBarChatroom: React.FC<Props> = ({ sideBarChatroom, collapsed }) => {\n  const { Text } = Typography;\n  const { participant, latestMessage, unreadMessageCount } = sideBarChatroom;\n  const { name, avatarUrl } = participant;\n  const { senderId, preview, createdAt } = latestMessage ?? {};\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  const visibledPreview = preview\n    ? preview.length < 30\n      ? preview\n      : `${preview?.substring(0, 30)}...`\n    : \"\";\n\n  const getUTCTime = (createdAt: number | undefined): string => {\n    if (createdAt) {\n      const _time = new Date();\n      _time.setTime(createdAt);\n      return (\n        _time.getHours().toString().padStart(2, \"0\") +\n        \":\" +\n        _time.getMinutes().toString().padStart(2, \"0\")\n      );\n    } else {\n      return \"\";\n    }\n  };\n\n  useLayoutEffect(() => {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n\n  return isCollapsed ? (\n    <Image\n      width={50}\n      height={50}\n      src={avatarUrl}\n      fallback=\"data:image/png;base64,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\"\n      preview={false}\n      className=\"avatar-img\"\n    />\n  ) : (\n    <Layout className=\"sideBar-chatroom\">\n      <Sider\n        theme=\"light\"\n        width={50}\n        className=\"sideBar-chatroom_avatar-img-container\"\n      >\n        <Image\n          width={50}\n          height={50}\n          src={avatarUrl}\n          fallback=\"data:image/png;base64,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\"\n          preview={false}\n          className=\"avatar-img\"\n        />\n      </Sider>\n      <Layout\n        className={\n          unreadMessageCount > 0\n            ? \"have-unread-message sideBar-chatroom_avatar-info-container\"\n            : \"sideBar-chatroom_avatar-info-container\"\n        }\n      >\n        <Header className=\"sideBar-chatroom_avatar-info_participant\">\n          <Text className=\"sideBar-chatroom_name\">{name}</Text>\n          <Text className=\"latest-message-time\">{getUTCTime(createdAt)}</Text>\n        </Header>\n        <Content className=\"sideBar-chatroom_latest-message-container\">\n          <Text>\n            {senderId === 0 ? `you: ${visibledPreview}` : visibledPreview}\n          </Text>\n        </Content>\n      </Layout>\n      {unreadMessageCount > 0 ? (\n        <div className=\"unread-message-count-container\">\n          <Text>{unreadMessageCount}</Text>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </Layout>\n  );\n};\n\nexport default SideBarChatroom;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import { PayloadAction } from \"@reduxjs/toolkit\";\n\nimport {\n  ISideBarChatroomList,\n  ISideBarChatroom,\n  IChatroomMessage,\n  IUser,\n  ILatestMessage,\n} from \"../../interface\";\n\nconst updateSideBarChatroomList = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<Array<ISideBarChatroom>>\n): ISideBarChatroomList => {\n  const newList: Array<ISideBarChatroom> = action.payload;\n  return {\n    list: newList,\n  };\n};\n\nconst resetUnreadCountById = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<string>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const id = action.payload;\n    const newList: Array<ISideBarChatroom> = prevState.list.map(\n      (sideBarChatroom: ISideBarChatroom) => {\n        const prevSideBarChatroom = { ...sideBarChatroom };\n        if (prevSideBarChatroom.id === id) {\n          prevSideBarChatroom.unreadMessageCount = 0;\n        }\n        return prevSideBarChatroom;\n      }\n    );\n    return {\n      list: newList,\n    };\n  }\n};\n\nconst getLatestMessage = (\n  message: IChatroomMessage\n): ILatestMessage | undefined => {\n  const latestMessage = message;\n  return {\n    ...latestMessage,\n    preview: latestMessage?.message,\n  };\n};\n\ninterface updateTempMessagesProps {\n  participant: IUser;\n  newMessages: IChatroomMessage[] | undefined;\n}\n\nconst updateTempMessagesByParticipant = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<updateTempMessagesProps>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const { participant, newMessages } = action.payload;\n    if (newMessages !== undefined) {\n      const newSideBarChatroomList: ISideBarChatroom[] = prevState.list.map(\n        (sideBarChatroom: ISideBarChatroom): ISideBarChatroom => {\n          const newSideBarChatroom = { ...sideBarChatroom };\n          if (newSideBarChatroom.participant.id === participant.id) {\n            newSideBarChatroom.tempMessages = newMessages;\n            newSideBarChatroom.latestMessage = getLatestMessage(\n              newMessages[newMessages.length - 1]\n            );\n          }\n          return newSideBarChatroom;\n        }\n      );\n      return {\n        list: newSideBarChatroomList,\n      };\n    }\n    return prevState;\n  }\n};\n\ninterface addTempMessageProp {\n  currentParticipant: IUser;\n  newMessage: IChatroomMessage;\n}\n\nconst addTempMessage = (\n  prevState: ISideBarChatroomList | null,\n  action: PayloadAction<addTempMessageProp>\n): ISideBarChatroomList | void => {\n  if (prevState !== null) {\n    const { currentParticipant, newMessage } = action.payload;\n    const newSideBarChatroomList: ISideBarChatroom[] = prevState.list.map(\n      (sideBarChatroom: ISideBarChatroom) => {\n        const newSideBarChatroom = { ...sideBarChatroom };\n        if (newSideBarChatroom.participant.id === currentParticipant.id) {\n          if (newSideBarChatroom.tempMessages !== undefined) {\n            newSideBarChatroom.tempMessages = [\n              ...newSideBarChatroom.tempMessages,\n              newMessage,\n            ];\n          }\n          newSideBarChatroom.latestMessage = getLatestMessage(newMessage);\n        }\n        return newSideBarChatroom;\n      }\n    );\n    return {\n      list: newSideBarChatroomList,\n    };\n  }\n};\n\nconst actions = {\n  updateSideBarChatroomList,\n  resetUnreadCountById,\n  updateTempMessagesByParticipant,\n  addTempMessage,\n};\n\nexport default actions;\n","import { ValidateSliceCaseReducers } from \"@reduxjs/toolkit\";\nimport { ISideBarChatroomList } from \"../../interface\";\nimport actionCreator from \"./actionCreator\";\n\nexport const sideBarChatroomListReducer: ValidateSliceCaseReducers<\n  ISideBarChatroomList | null,\n  typeof actionCreator\n> = actionCreator;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { ISideBarChatroomList } from \"../../interface\";\nimport { useAppSelector } from \"../app/hooks\";\nimport { sideBarChatroomListReducer } from \"./Reducers\";\n\nconst initialState: ISideBarChatroomList | null = null;\n\nconst sideBarChatRoomListSlice = createSlice({\n  name: \"sideBarChatRoomListSlice\",\n  initialState,\n  reducers: sideBarChatroomListReducer,\n});\n\nexport const sideBarChatroomListActions = sideBarChatRoomListSlice.actions;\n\nexport const useSideBarChatroomList = () =>\n  useAppSelector((state) => state.sideBarChatroomList);\n\nexport default sideBarChatRoomListSlice.reducer;\n","import { ValidateSliceCaseReducers } from \"@reduxjs/toolkit\";\nimport { IChatroom } from \"../../interface\";\nimport actionCreator from \"./actionCreator\";\n\nexport const chatroomReducer: ValidateSliceCaseReducers<\n  IChatroom | null,\n  typeof actionCreator\n> = actionCreator;\n","import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { IChatroom, IChatroomMessage } from \"../../interface\";\n\nconst updateChatroom = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroom>\n): IChatroom => action.payload;\n\nconst addMessage = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroomMessage>\n): IChatroom | void => {\n  if (prevState !== null) {\n    const newChatroom: IChatroom = {\n      ...prevState,\n      chatroomMessages:\n        prevState.chatroomMessages !== undefined\n          ? [...prevState.chatroomMessages, action.payload]\n          : [action.payload],\n    };\n    return newChatroom;\n  }\n};\n\nconst loadMore = (\n  prevState: IChatroom | null,\n  action: PayloadAction<IChatroomMessage[]>\n): IChatroom | void => {\n  if (prevState !== null && prevState.chatroomMessages !== undefined) {\n    const moreMessage = action.payload;\n    return {\n      ...prevState,\n      chatroomMessages: [...moreMessage, ...prevState.chatroomMessages],\n    };\n  }\n};\n\nconst actions = { updateChatroom, addMessage, loadMore };\n\nexport default actions;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nimport { IChatroom } from \"../../interface\";\nimport { useAppSelector } from \"../app/hooks\";\nimport { chatroomReducer } from \"./Reducers\";\n\nconst initialState: IChatroom | null = null;\n\nexport const chatroomSlice = createSlice({\n  name: \"chatroomSlice\",\n  initialState,\n  reducers: chatroomReducer,\n});\n\nexport const chatroomActions = chatroomSlice.actions;\n\nexport const useChatroom = () => useAppSelector((state) => state.chatroom);\n\nexport default chatroomSlice.reducer;\n","import { ISideBarChatroom, IUser, MessageType } from \"../interface\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport FirstName from \"./FirstName.json\";\nimport LastName from \"./LastName.json\";\n\nconst capitalize = (str: string) => str[0].toUpperCase() + str.substring(0);\n\nconst getRandomInt = (min: number, max: number): number =>\n  Math.floor(Math.random() * (max - min) + min);\n\nconst getRandomName = (): string => {\n  const randomIntOfFirstName = getRandomInt(0, FirstName.length);\n  const randomIntOfLastName = getRandomInt(0, LastName.length);\n  const firstName = capitalize(FirstName[randomIntOfFirstName]);\n  const lastName = capitalize(LastName[randomIntOfLastName]);\n\n  return `${firstName} ${lastName}`;\n};\n\nconst getRandomParticipant = (): IUser => {\n  const name = getRandomName();\n  const encodedName = encodeURIComponent(name);\n  return {\n    id: Math.floor(Math.random() * 100),\n    name,\n    avatarUrl: `https://icotar.com/initials/${encodedName}`,\n  };\n};\n\nexport const getRandomSideBarChatroom = (): ISideBarChatroom => ({\n  id: uuidv4(),\n  participant: getRandomParticipant(),\n  unreadMessageCount: Math.floor(Math.random() * 1000),\n});\n","import { ISideBarChatroom } from \"../interface\";\nimport { getRandomSideBarChatroom } from \"../mock/GetRandomSideBarChatroom\";\n\nexport const sideBarChatroomAPIs = {\n  getSideBarChatroomList: () => {\n    const _newSideBarChatroomList: ISideBarChatroom[] = [];\n    const numberOfSideBarChatroom = Math.floor((Math.random() + 4) * 10);\n    for (let i = 0; i < numberOfSideBarChatroom; i++) {\n      _newSideBarChatroomList.push(getRandomSideBarChatroom());\n    }\n\n    return _newSideBarChatroomList;\n  },\n};\n","import Messages from \"./Messages.json\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { IChatroomMessage, MessageType } from \"../interface\";\n\nconst getRandomMessage = (senderId: number): IChatroomMessage => {\n  const indexOfMessage = Math.floor(Math.random() * Messages.length);\n  const randomSender = Math.floor(Math.random() * 50) > 25 ? 0 : senderId;\n\n  return {\n    id: uuidv4(),\n    type: MessageType.Text,\n    senderId: randomSender,\n    message: Messages[indexOfMessage],\n    createdAt: new Date().getTime() - Math.floor(Math.random() * 3000),\n  };\n};\n\nexport const getRandomMessages = (\n  senderId: number\n): IChatroomMessage[] | undefined => {\n  const newMessages: IChatroomMessage[] = [];\n  const messagesLength: number = Math.floor(Math.random() * 500);\n  for (let i = 0; i < messagesLength; i++) {\n    newMessages.push(getRandomMessage(senderId));\n  }\n  return newMessages.length > 0 ? newMessages : undefined;\n};\n","import { getRandomMessages } from \"../mock/GetRandomMessages\";\n\nexport const chatroomAPIs = {\n  getChatroomMessages: (id: number) => getRandomMessages(id),\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Menu } from \"antd\";\nimport SideBarChatroom from \"./SideBarChatroom\";\nimport {\n  sideBarChatroomListActions,\n  useSideBarChatroomList,\n} from \"../redux/sidebarChatroomList/slice\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nimport {\n  IChatroom,\n  IChatroomMessage,\n  ISideBarChatroom,\n  IUser,\n} from \"../interface\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { sideBarChatroomAPIs } from \"../api/sideBarChatroomAPIs\";\nimport { chatroomAPIs } from \"../api/chatroomAPIs\";\n\ntype SideBarChatroomListProps = {\n  collapsed: boolean;\n};\n\nexport default function SideBarChatroomList({\n  collapsed,\n}: SideBarChatroomListProps) {\n  const sideBarChatroomList = useSideBarChatroomList();\n  const dispatch = useAppDispatch();\n  const {\n    updateSideBarChatroomList,\n    resetUnreadCountById,\n    updateTempMessagesByParticipant,\n  } = sideBarChatroomListActions;\n  const { updateChatroom } = chatroomActions;\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchSideBarChatroom = () => {\n    const newSideBarChatroomList: ISideBarChatroom[] = sideBarChatroomAPIs.getSideBarChatroomList();\n    dispatch(updateSideBarChatroomList(newSideBarChatroomList));\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchSideBarChatroom();\n  }, []);\n\n  // if sideBarChatroom.tempMessage exist, use it without fetch\n  const getMessages = (\n    sideBarChatroom: ISideBarChatroom\n  ): IChatroomMessage[] | undefined => {\n    if (sideBarChatroom.tempMessages === undefined) {\n      const newMessages:\n        | IChatroomMessage[]\n        | undefined = chatroomAPIs.getChatroomMessages(\n        sideBarChatroom.participant.id\n      );\n      dispatch(\n        updateTempMessagesByParticipant({\n          participant: sideBarChatroom.participant,\n          newMessages,\n        })\n      );\n      return newMessages;\n    } else {\n      return sideBarChatroom.tempMessages;\n    }\n  };\n\n  const getCurrentChatroom = (sideBarChatroom: ISideBarChatroom): IChatroom => {\n    const currentUser: IUser = {\n      id: 0,\n      name: \"YOU\",\n      avatarUrl: \"/userImg.jpg\",\n    };\n    const newChatroom: IChatroom = {\n      currentParticipant: sideBarChatroom.participant,\n      currentUser,\n      chatroomMessages: getMessages(sideBarChatroom),\n    };\n    return newChatroom;\n  };\n\n  const handleSideBarChatroomClick = (sideBarChatroom: ISideBarChatroom) => {\n    const { id } = sideBarChatroom;\n    dispatch(resetUnreadCountById(id));\n    dispatch(updateChatroom(getCurrentChatroom(sideBarChatroom)));\n  };\n\n  return isLoading ? (\n    <div>loading...</div>\n  ) : (\n    <Menu theme=\"light\" mode=\"inline\">\n      {sideBarChatroomList &&\n        sideBarChatroomList.list.map((sideBarChatroom) => (\n          <Menu.Item\n            onClick={() => handleSideBarChatroomClick(sideBarChatroom)}\n            key={sideBarChatroom.id}\n            className=\"sidebar-chatroom-container\"\n            title={sideBarChatroom.latestMessage?.preview}\n          >\n            <SideBarChatroom\n              sideBarChatroom={sideBarChatroom}\n              collapsed={collapsed}\n            />\n          </Menu.Item>\n        ))}\n    </Menu>\n  );\n}\n","export const configs = {\n  size:{\n    lg: \"large\",\n    md: \"middle\",\n    sm: \"small\",\n  },\n  sideBar:{\n    logo: \"Messenger\",\n    searchInput: \"Search Messenger\"\n  }\n}","import React from \"react\";\nimport { Input } from \"antd\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { configs } from \"../configs\";\n\ntype SearchBarProps = {\n  collapsed: boolean;\n  handleSearchIconClick?: () => void;\n};\n\nexport default function SideBarSearchBar({ collapsed, handleSearchIconClick }: SearchBarProps) {\n  \n  return !collapsed ? (\n    <div className=\"search-bar-container\">\n      <Input\n        bordered={false}\n        placeholder={configs.sideBar.searchInput}\n        prefix={<SearchOutlined />}\n      />\n    </div>\n  ) : (\n    <div className=\"collapsed-search-icon-container\" onClick={handleSearchIconClick}>\n      <SearchOutlined className=\"collapsed-search-icon\" />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { MessageOutlined, FormOutlined } from \"@ant-design/icons\";\nimport { Button } from \"antd\";\nimport { configs } from \"../configs\";\n\ntype SideBarHeaderProps = {\n  collapsed: boolean;\n};\n\nexport default function SideBarHeader({ collapsed }: SideBarHeaderProps) {\n  return !collapsed ? (\n    <>\n      <div className=\"logo-container\">\n        <MessageOutlined className=\"logo-icon\" />\n      </div>\n      <div className=\"header-logo\">{configs.sideBar.logo}</div>\n      <Button\n        className=\"sidebar_button\"\n        size=\"large\"\n        icon={<FormOutlined className=\"sideBar_button_icon\" />}\n      />\n    </>\n  ) : (\n    <div className=\"collapsed-logo-icon-container\">\n      <MessageOutlined className=\"logo-icon\" />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Layout } from \"antd\";\nimport SideBarChatroomList from \"./SideBarChatroomList\";\nimport SideBarSearchBar from \"./SideBarSearchBar\";\nimport SideBarHeader from \"./SideBarHeader\";\n\nconst { Header, Sider } = Layout;\n\nexport default function SideBar() {\n  const [collapsed, setCollapsed] = useState(false);\n\n  const handleSearchIconClick = (): void => {\n    setCollapsed((prev) => !prev);\n  };\n\n  const onCollapse = (collapsed: boolean) => {\n    setCollapsed(collapsed);\n  };\n  return (\n    <Sider\n      className=\"sideBar\"\n      collapsible\n      collapsed={collapsed}\n      onCollapse={onCollapse}\n      width={350}\n    >\n      <Header\n        className={\n          collapsed ? \"sideBar_header collapsed_header\" : \"sideBar_header\"\n        }\n      >\n        <SideBarHeader collapsed={collapsed} />\n      </Header>\n      <SideBarSearchBar\n        collapsed={collapsed}\n        handleSearchIconClick={handleSearchIconClick}\n      />\n      <SideBarChatroomList collapsed={collapsed} />\n    </Sider>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Button, Layout } from \"antd\";\nimport { SmileOutlined } from \"@ant-design/icons\";\nimport Picker, { IEmojiData } from \"emoji-picker-react\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { IChatroom, IChatroomMessage, MessageType } from \"../interface\";\nimport { sideBarChatroomListActions } from \"../redux/sidebarChatroomList/slice\";\nconst { Footer } = Layout;\n\ntype ChatroomInputProps = {\n  chatroom: IChatroom;\n};\nexport default function ChatroomInput({ chatroom }: ChatroomInputProps) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const dispatch = useAppDispatch();\n  const { addMessage } = chatroomActions;\n  const { addTempMessage } = sideBarChatroomListActions;\n  const { currentParticipant } = chatroom;\n  const [isEmojiPickerVisibled, setIsEmojiPickerVisibled] = useState(false);\n  const inputRef = useRef<null | HTMLInputElement>(null);\n\n  const handleInputChange = (e: React.FormEvent<HTMLInputElement>) => {\n    setInputValue(e.currentTarget.value);\n  };\n\n  const handleFormSubmit = (e: React.FormEvent): void => {\n    e.preventDefault();\n    if (inputValue !== \"\") {\n      const newMessage: IChatroomMessage = {\n        id: uuidv4(),\n        type: MessageType.Text,\n        senderId: 0,\n        message: inputValue,\n        createdAt: new Date().getTime(),\n      };\n      dispatch(addMessage(newMessage));\n      dispatch(addTempMessage({ currentParticipant, newMessage }));\n      setInputValue(\"\");\n    }\n  };\n  const onEmojiClick = (\n    event: React.MouseEvent,\n    emojiObject: IEmojiData\n  ): void => {\n    setInputValue((prev) => prev + emojiObject.emoji);\n  };\n\n  const toggleEmojiPickerVisibled = (): void => {\n    setIsEmojiPickerVisibled((prev) => !prev);\n  };\n\n  const handleInputFocused = (): void => {\n    if (isEmojiPickerVisibled) {\n      setIsEmojiPickerVisibled(false);\n    }\n  };\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.value = \"\";\n      inputRef.current.focus();\n    }\n  }, [chatroom]);\n\n  return (\n    <Footer style={{ display: \"flex\" }}>\n      <form style={{ flex: 1 }} onSubmit={handleFormSubmit}>\n        <input\n          onFocus={handleInputFocused}\n          value={inputValue}\n          onChange={handleInputChange}\n          ref={inputRef}\n        />\n      </form>\n      <div\n        style={{\n          maxWidth: 50,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Button\n          onClick={toggleEmojiPickerVisibled}\n          shape=\"circle\"\n          icon={<SmileOutlined />}\n        />\n      </div>\n      {isEmojiPickerVisibled ? (\n        <div style={{ position: \"absolute\", bottom: 53, right: 0 }}>\n          <Picker onEmojiClick={onEmojiClick} />\n        </div>\n      ) : (\n        <></>\n      )}\n    </Footer>\n  );\n}\n","import React, { useLayoutEffect, useRef } from \"react\";\nimport { Layout, Image, Button, Empty } from \"antd\";\nimport { IChatroom, IChatroomMessage } from \"../interface\";\nimport { getRandomMessages } from \"../mock/GetRandomMessages\";\nimport { chatroomActions } from \"../redux/chatroom/slice\";\nimport { useAppDispatch } from \"../redux/app/hooks\";\nconst { Content } = Layout;\n\ntype MessageListProps = {\n  chatroom: IChatroom | null;\n};\n\nexport default function ChatroomMessageList({ chatroom }: MessageListProps) {\n  const avatarUrl = chatroom ? chatroom.currentParticipant.avatarUrl : \"\";\n  const bottomDiv = useRef<null | HTMLDivElement>(null);\n  const scrollToBottom = (): void => {\n    setTimeout(() => {\n      bottomDiv.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, 0);\n  };\n  const dispatch = useAppDispatch();\n  const { loadMore } = chatroomActions;\n\n  useLayoutEffect(() => {\n    scrollToBottom();\n  }, [chatroom?.currentParticipant.id]);\n\n  const handleLoadMoreClick = (): void => {\n    if (chatroom) {\n      const moreMessages: IChatroomMessage[] | undefined = getRandomMessages(\n        chatroom.currentParticipant.id\n      );\n      if (moreMessages) {\n        dispatch(loadMore(moreMessages));\n      }\n    }\n  };\n\n  return (\n    <Content className=\"message-list-container\">\n      {chatroom && chatroom.chatroomMessages !== undefined ? (\n        <div className=\"site-layout-background\">\n          <div\n            className=\"message-container\"\n            style={{ justifyContent: \"center\" }}\n          >\n            <Button type=\"primary\" shape=\"round\" onClick={handleLoadMoreClick}>\n              load more\n            </Button>\n          </div>\n          {chatroom.chatroomMessages.map((message) => (\n            <div\n              key={message.id}\n              className={\n                message.senderId === 0\n                  ? \"message-container user\"\n                  : \"message-container\"\n              }\n            >\n              {message.senderId === 0 ? (\n                <></>\n              ) : (\n                <div className=\"avatar\">\n                  <Image\n                    src={avatarUrl}\n                    width={30}\n                    height={30}\n                    preview={false}\n                  />\n                </div>\n              )}\n\n              <div\n                className={message.senderId === 0 ? \"message user\" : \"message\"}\n              >\n                {message.message}\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div\n          style={{\n            height: \"100%\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <Empty />\n        </div>\n      )}\n      <div className=\"divForAutoScroll\" ref={bottomDiv}></div>\n    </Content>\n  );\n}\n","import React from \"react\";\nimport { Image } from \"antd\";\nimport { IChatroom, IUser } from \"../interface\";\n\ntype ChatroomHeaderProps = {\n  chatroom: IChatroom | null;\n};\n\nexport default function ChatroomHeader({ chatroom }: ChatroomHeaderProps) {\n  const currentUser: IUser = {\n    id: 0,\n    name: \"you\",\n    avatarUrl: `https://icotar.com/initials/${encodeURIComponent(\n      \"Patrick Yang\"\n    )}`,\n  };\n\n  return (\n    <div className=\"chatroom-header-container\">\n      <div className=\"chatroom-header-participant\">\n        {chatroom?.currentParticipant.name}\n      </div>\n      <div className=\"chatroom-header-user-container\">\n        <div className=\"user\">{currentUser.name}</div>\n        {currentUser.avatarUrl === \"initial user avatar url\" ? (\n          <></>\n        ) : (\n          <Image\n            width={50}\n            height={50}\n            src={currentUser.avatarUrl}\n            preview={false}\n            className=\"user-img\"\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Layout } from \"antd\";\nimport ChatroomInput from \"./ChatroomInput\";\nimport ChatroomMessageList from \"./ChatroomMessageList\";\nimport ChatroomHeader from \"./ChatroomHeader\";\nimport { useChatroom } from \"../redux/chatroom/slice\";\n\nconst { Header } = Layout;\n\nexport default function Chatroom() {\n  const chatroom = useChatroom();\n\n  return (\n    <Layout className=\"site-layout\">\n      <Header className=\"header-background\" style={{ padding: 0 }}>\n        <ChatroomHeader chatroom={chatroom} />\n      </Header>\n      <ChatroomMessageList chatroom={chatroom} />\n      {chatroom !== null ? <ChatroomInput chatroom={chatroom} /> : <></>}\n    </Layout>\n  );\n}\n","import * as React from \"react\";\nimport \"antd/dist/antd.css\";\nimport { Layout } from \"antd\";\nimport SideBar from \"./SideBar\";\nimport Chatroom from \"./Chatroom\";\n\nexport default function Main() {\n  return (\n    <Layout style={{ maxHeight: \"100vh\", minHeight: \"100vh\", overflow:\"hidden\" }}>\n      <SideBar />\n      <Chatroom />\n    </Layout>\n  );\n}\n","import React, { FunctionComponent } from \"react\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport { Provider } from \"react-redux\";\nimport sideBarChatRoomListSlice from \"./sidebarChatroomList/slice\";\nimport chatroomSlice from \"./chatroom/slice\";\n\nconst store = configureStore({\n  reducer: {\n    sideBarChatroomList: sideBarChatRoomListSlice,\n    chatroom: chatroomSlice,\n  },\n});\n\nexport const StoreProvider: FunctionComponent = ({ children }) => (\n  <Provider store={store}>{children}</Provider>\n);\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import \"./style/index.scss\";\nimport Main from \"./components/Main\";\nimport { StoreProvider } from \"./redux/store\";\n\nfunction App() {\n  return (\n    <StoreProvider>\n      <Main />\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}